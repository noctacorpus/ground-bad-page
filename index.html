<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>GroundBad Verification</title>
  <style>
    body { font-family: system-ui; background: #0b1220; color: #e0e8f8; text-align:center; padding-top:10%; }
    .box { background:#101b2e; display:inline-block; padding:2rem; border-radius:10px; min-width:320px; }
    h1 { margin-bottom:1rem; }
  </style>
</head>
<body>
  <div class="box">
    <h1 id="title">Processing...</h1>
    <p id="status">Please wait while we confirm your request.</p>
  </div>
  <script>
    const params = new URLSearchParams(location.search);
    const token = params.get("token");
    const action = params.get("action") || "verify_account";

    if (!token) {
      document.getElementById("title").innerText = "Missing token!";
      document.getElementById("status").innerText = "No token provided in URL.";
    } else {
      const cloudUrl = `https://cloud-code.services.api.unity.com/v1/projects/3021b893-88f4-4651-916d-924715a5e1b7/modules/CloudManager/publicVerify?token=${encodeURIComponent(token)}&action=${encodeURIComponent(action)}`;
      
      fetch(cloudUrl)
        .then(r => r.json())
        .then(data => {
          document.getElementById("title").innerText = data.success ? "✅ Success" : "❌ Failed";
          document.getElementById("status").innerText = data.message;
        })
        .catch(err => {
          document.getElementById("title").innerText = "❌ Error";
          document.getElementById("status").innerText = err.message;
        });
    }
  </script>
</body>
</html>
